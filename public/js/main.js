let things = [

// animals (mammals)
  'dog',
  'cat',
  'horse',
  'mule',
  'koala',
  'kangaroo',
  'wolf',
  'deer',
  'stag',
  'bear',
  'otter',
  'leopard',
  'tiger',
  'lion',
  'giraffe',
  'rhino',
  'cow',
  'highland cow',
  'sheep',
  'pig',
  'sloth',
  'chimpanzee',
  'gorilla',
  'bonobo',
  'ferret',
  'mink',
  'rat',
  'mouse',
  'shrew',
  'badger',
  'zebra',
  'polar bear',
  'bat',
  'gazelle',
  'platypus',
  'monkey',
  'orangutan',
  'quokka',
  'raccoon',
  'fox',
  'antelope',
  'wombat',
  'possum',
  'beaver',
  'squirrel',
  'elephant',
  'hippopotamus',


// insects + arachnids
  'spider',
  'snail',
  'ant',
  'bee',
  'fly',
  'mosquito',
  'slug',
  'tarantula',
  'scorpion',
  'grasshopper',
  'earth worm',
  'fire fly / glow worm / lightning bug',
  'centipede',
  'millipede',
  'praying mantis',
  'butterfly',
  'moth',
  'stag beetle',
  'lady bug',
  'woodlouse / roly poly',


// birds
  'flamingo',
  'falcon',
  'eagle',
  'kite',
  'blue tit',
  'swan',
  'duck',
  'owl',
  'pigeon',
  'raven',
  'crow',
  'magpie',
  'vulture',
  'sparrow',
  'blue bird',
  'toucan',
  'penguin',
  'skylark',
  'parrot',
  'hummingbird',
  'woodpecker',
  'heron',
  'crane',
  'swallow',
  'albatross',
  'cuckoo',
  'kingfisher',
  'stork',
  'ibis',
  'duck',


// amphibians + reptiles
  'frog',
  'toad',
  'lizard',
  'newt',
  'snake',
  'crocodile',
  'alligator',
  'anaconda',
  'viper',
  'black widow',


// marine animals
  'goldfish',
  'koi',
  'beta fighting fish',
  'salmon',
  'trout',
  'whale',
  'dolphin',
  'octopus',
  'squid',
  'jellyfish',
  'starfish',
  'sea cucumber',
  'angler fish',
  'orca',
  'carp',
  'tuna',
  'eel',
  'moray',
  'manta ray',
  'turtle',
  'tortoise',
  'clam',
  'oyster',
  'shellfish',
  'crab',
  'hermit crab',
  'coconut crab',
  'coelacanth',
  'walrus',
  'seal',


// extinct animals
  'tyranosaurus rex',
  'pterosaur',
  'stegosaurus',
  'triceratops',
  'velociraptor',
  'brontosaurus',


// fantasy/mythology/creatures
  'dragon',
  'gryphon',
  'selkie',
  'fairy',
  'elf',
  'dwarf',
  'hobbit',
  'basilisk',
  'goblin',
  'dulahan',
  'slime',
  'orc',
  'witch',
  'incubus',
  'succubus',
  'wizard',
  'grim reaper',
  'sorceror',
  'barbarian',
  'god',
  'dryad',
  'druid',
  'rogue',
  'mummy',
  'frankenstein',
  'ghoul',
  'vampire',
  'werewolf',
  'ghost',
  'poltergeist',
  'changeling',
  'shapeshifter',
  'troll',
  'demon',
  'creature',
  'monster',
  'giant',
  'colossus',
  'psychopomp',
  'assassin',
  'pirate',
  'monk',


// sci-fi
  'artificial intelligence',
  'spaceship',
  'blaster',
  'robot',
  'android',
  'alien',
  'augmentation',
  'interface',


// fantasy/scifi equipment
  'weapon',
  'sword',
  'shield',
  'bow',
  'arrows',
  'quiver',
  'spell',
  'ability',
  'magic',
  'slingshot',
  'grappling hook',
  'boomerang',
  'saw',
  'whip',
  'spear',
  'shotgun',
  'rifle',
  'handgun',
  'dagger',
  'staff',
  'wand',
  'blade',
  'mace',
  'hammer',
  'scimitar',
  'scythe',
  'broomstick',
  'armor',
  'axe',
  'potion',
  'gun',
  'martial arts',
  'glove',
  'science',
  'phaser',
  'laser beam',
  'bomb',
  'bangle',
  'uniform',
  'summon',
  'sabre',
  'gems',
  'treasure',
  'loot',
  'accessory',
  'grimoire',


  'poison',
  'drain',
  'mana',
  'life',
  'acid',
  'growth',
  'water',
  'flow',
  'ice',
  'fire',
  'flame',
  'burn',
  'lightning',
  'earth',
  'metal',
  'shadow',
  'light',
  'nature',
  'air',
  'cloud',
  'health',
  'thunder',
  'time',



// clothes
  'hat',
  'beanie',
  'tophat',
  'bonnet',
  'cap',
  'helmet',
  'tshirt',
  'jeans',
  'boxers',
  'boots',
  'runners',
  'socks',
  'kilt',
  'towel',
  'jumper',
  'shirt',
  'pyjamas',
  'onesie',
  'slippers',
  'dressing gown / housecoat',

  'jewelery',
  'bracelet',
  'earring',
  'broach',
  'cloak',
  'tunic',
  'scarf',
  'hood',
  'hoodie',
  'necklace',
  'amulet',
  'jacket',
  'coat',
  'torc',
  'piercing',
  'tattoo',
  'body modification',
  'hair tye',
  'clip',
  'tie',
  'cravat',
  'dress',
  'bra',
  'underwear',
  'vest',
  'bowtie',
  'hairband',
  'parka',
  'bomber jacket',
  'sneakers',
  'skinny jeans',
  'moustache',
  'beard',
  'makeup',
  'suit',
  'fancy dress',
  'costume',
  'mask',
  'outfit',
  'robe',
  'gown',
  'tights',
  'shorts',
  'skirt',
  'trousers',
  'shawl',
  'apron',


// household objects/furniture

// bedroom
  'bed',
  'fan',
  'mirror',
  'radiator',
  'bedside table',
  'wardrobe',
  'dresser',

// sitting/living room
  'chair',
  'lamp',
  'couch',
  'desk',

// bathroom
  'sink',
  'bath',
  'shower',
  'soap',
  'toothpaste',
  'toothbrush',
  'loofah',
  'bath mat',
  'cleaning supplies',

// decorative / aromatic
  'picture frame',
  'clock',
  'poster',
  'tapestry',
  'candle',
  'pot pourri',
  'incense',
  'diffuser',
  'houseplant',
  'map',
  'box of tissues',
  'rug',
  'sculpture',
  'painting',
  'art piece',

// passtimes
  'record player (+records)',
  'headphones',
  'tv',
  'computer',
  'coffee table',
  'board games',
  'video games',
  'book',
  'bookshelf',

// kitchen
  'plate',
  'bowl',
  'mug',
  'teacup',
  'fork',
  'knife',
  'spoon',
  'stove',
  'kettle',
  'pot',
  'pan',
  'bread bin',
  'refridgerator',
  'microwave',
  'toaster',
  'rice cooker',
  'blender',
  'coffee machine',
  'oven',


// people/relationships
  'boy',
  'girl',
  'dad',
  'mom',
  'son',
  'daughter',
  'brother',
  'sister',
  'lover',
  'writer',
  'thief',
  'courier',
  'barista',
  'pilgrim',
  'bandit',
  'nemesis',
  'hero',
  'liar',
  'friend',
  'betrayer',
  'wise elder',
  'unlikely helper',
  'creator',
  'wildcard',
  'loner',
  'charmer',
  'artificer',
  'baker',
  'home maker',
  'doctor',
  'villain',
  'side kick',
  'artist',
  'builder',
  'woodworker',
  'scientist',
  'archaeologist',
  'botanist',
  'herbologist',
  'fortune teller',
  'conman',
  'gardener',
  'farmer',
  'fisherman',
  'diver',
  'climber',
  'explorer',
  'adventurer',
  'nurse',
  'musician',
  'illustrator',
  'driver',
  'athlete',
  'soldier',
  'sailor',


// spaces that can tell the story of what lives there
  'house',
  'city',
  'cottage',
  'hobbit hole',
  'tower',
  'village',
  'apartment',
  'campsite',
  'lair',
  'greenhouse',
  'bedroom',
  'kitchen',
  'living room',
  'sitting room',
  'bathroom',
  'library',
  'gym',
  'utility room',
  'wet room',
  'porch',
  'conservatory',
  'garden',
  'vegetable patch',
  'music room',
  'auditorium',
  'concert hall',
  'shop',
  'music shop',
  'grocery shop',
  'supermarket',
  'market',
  'coffee shop',
  'graveyard',
  'cemetery',
  'forest',
  'studio',
  'office',
  'workshop',
  'factory',
  'climbing gym',
  'garage',
  'school',
  'college',
  'university',
  'slaughterhouse',
  'castle',
  'palace',
  'sewers',
  'waterway',
  'treehouse',
  'beach',
  'ice cave',
  'temple',
  'space station',
  'research station',
  'laboratory',
  'mansion',
  'bungalow',
  'park',
  'dog park',
  'atelier',
  'haberdashery',
  'arch',
  'statue',
  'cavern',
  'desert',
  'mountain',
  'inn',
  'hotel',
  'bed & breakfast',
  'holiday home',
  'swimming pool',
  'lake',
  'diving pool',
  'cliffs',
  'highlands',
  'plains',
  'savanah',
  'ruins',
  'woods',
  'woodland clearing',
  'home',
  'church',
  'cathedral',
  'mosque',
  'tomb',
  'catacomb',
  'undercroft',
  'pond',
  'motorway',
  'oasis',
  'meadow',
  'grotto',
  'alleyway',
  'road',
  'lane',
  'museum',
  'circus',
  'festival',
  'party',
  'amusement park',
  'den',
  'training grounds',
  'arena',
  'stadium',
  'colosseum',
  'fortress',
  'bar',
  'tavern',
  'port',
  'docks',
  'jail',
  'prison',
  'ship',
  'shipwreck',
  'vessel',
  'container',
  'treasure chest',
  'trunk',
  'hideout',
  'swamp',
  'moors',
  'dungeon',
  'kingdom',
  'queendom',
  'dynasty',
  'reactor',
  'farm',
  'river',
  'resort',
  'camp',
  'makeshift',
  'hospital',
  'lighthouse',
  'storm',
  'cabin',
  'island',
  'bridge',
  'hill',
  'lookout',
  'train station',
  'liminal space',
  'bathhouse',
  'spa',
  'cinema',
  'car park',
  'airport',
  'taxi',
  'car',
  'bus',
  'bicycle',
  'camper van',
  'theatre',
  'asylum',
  'haunted house',
  'maze',
  'labyrinth',


  'love',
  'loss',
  'betrayal',
  'hope',
  'friendship',
  'solitude',
  'cosy',
  'homely',
  'dark',
  'dank',
  'bright',
  'lovely',
  'empty',
  'full',
  'never',
  'always',
  'bloody',
  'natural',
  'artificial',
  'communal',
  'hate',
  'trust',
  'redemption',
  'comfy',
  'dreary',
  'soft',
  'hard',
  'free',
  'trapped',
  'belonging',


];


var media = [
// 3D
  'modelling',
  'sculpture',
  'texture',

// 2D
  'sketch',
  'illustration',

// interactive
  'game',

// musical
  'song',
  'instrumental',

// writing
  'character bio/description',
  'poem',
  'short story',
];

let d = new Date();


function getRandomInt(max) {
  return Math.floor(Math.random() * Math.floor(max));
}

function postNewTheme(m, t){
  var xhr = new XMLHttpRequest();
  xhr.open("POST", '/add', true);
  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.send(JSON.stringify({
      date : getDateString(),
      medium : m,
      thing : t
  }));
}

function getDateString() {
  return d.getUTCFullYear() + '-' + d.getUTCMonth() + '-' + d.getUTCDate();
}

function getReadableDateString(){
  var weekdays = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
  var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  return "" + weekdays[d.getUTCDay()] + " " + getDateEnding(d.getUTCDate()) + " " + months[d.getUTCMonth()];
}

function getDateEnding(i){
  switch(i){
    case 1:
    case 21:
    case 31:
      return i + "st";
      break;
    case 2:
    case 22:
      return i + "nd";
      break;
    case 3:
    case 23:
      return i + "rd";
      break;
    default:
      return i + "th";
  }
}

function readTextFile(file, callback) {
    var rawFile = new XMLHttpRequest();
    rawFile.overrideMimeType("application/json");
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function() {
        if (rawFile.readyState === 4 && rawFile.status == "200") {
            callback(rawFile.responseText);
        }
    }
    rawFile.send(null);
}

var medium = '';
var thing = '';

readTextFile("/data/themes.json", function(text){
    var data = JSON.parse(text);
    console.log(data);
    var last = data.themes[data.themes.length - 1];

    if(last.date == getDateString()){
      // we have one for today
      medium = last.medium;
      thing = last.thing;
    } else {
      // create a new one
      medium = media[getRandomInt(media.length)];
      thing = things[getRandomInt(things.length)];
      postNewTheme(medium, thing);
    }

    document.getElementById("medium").innerHTML = "" + medium;
    document.getElementById("thing").innerHTML = "" + thing;

});

document.getElementById("date").innerHTML = getReadableDateString();
